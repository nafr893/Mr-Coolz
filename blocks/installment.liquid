{%- liquid
  assign variant = product.selected_or_first_available_variant
  assign count = block.settings.installment_count | default: 4
  assign alignment = block.settings.alignment | default: 'left'
  assign show_installments = false
  assign installment_price = 0

  if shop.installments_enabled and variant.price > 0 and count > 1
    assign show_installments = true
    assign installment_price = variant.price | divided_by: count
  endif
-%}

{%- if show_installments -%}
  <div class="horizon-installments text-{{ alignment }}">
    <span class="horizon-installments__text">
      or {{ count }} payments of <strong>{{ installment_price | money }}</strong>
    </span>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Installment Price",
    "tag": "div",
  "settings": [
    {
      "type": "number",
      "id": "installment_count",
      "label": "Number of installments",
      "default": 4,
      
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    }
  ],
   "presets": [
    {
      "name": "Installments"
    }
  ]
}
{% endschema %}

{% stylesheet %}
.horizon-installments {
  margin-top: 0.5em;
  font-size: 1rem;
  color: var(--color-foreground, #222);
}
.horizon-installments__text {
  font-family: var(--font-body--family, inherit);
  letter-spacing: 0.01em;
}
.text-center {
  text-align: center;
}
.text-right {
  text-align: right;
}
.text-left {
  text-align: left;
}
{% endstylesheet %}
